{% load static %}

<!--Any web pages contents is here-->
<div class="row justify-content-center">


    <script>
        var tests = new Array();

        // Autogenerated: backend object_list reflection
        {% for test in object_list %}
        tests['{{ forloop.counter0 }}'] = {
            'id': '{{ test.id }}',
            'type': '{{ test.type }}',
            'patientCI': '{{ test.patientCI }}',
            'test_id': '{{ test.testID }}',
            'result': '{{ test.result }}',
            'begin_date': '{{ test.begin_date }}',
            'resolution_date': '{{ test.resolution_date }}'
        };
        {% endfor %}

    </script>
    <script src="{% static 'js/result_list_items_listeners.js' %}"></script>


    <div class="col-12 text-center fs-5 fw-bold">
        Registro de Examenes
    </div>

    <!-- User analisis list-->
    <div class="col-11 col-md-10 mt-2 border border-dark overflow-auto" style="height: 50vh;">

        <table class="table">
            <thead>
                <th scope="col" class="col-1 text-center"></th>
                <th scope="col" class="col text-center">Tipo</th>
                <th scope="col" class="col text-center">Fecha</th>
                <th scope="col" class="col text-center">Estado</th>
                <th scope="col" class="col-3 text-center">Accion</th>
            </thead>
            <tbody>

                {% for test in object_list %}

                <tr class="examen {% if test.state == 'notified' %}bg-sucess{% endif %}">
                    <td class="col-1">
                        <input type="checkbox" class="form-ckeck">
                    </td>
                    <td class="col">
                        {{test.type}}
                    </td>
                    <td class="col">
                        <time>
                            {{test.begin_date}}
                        </time>
                    </td>
                    <td class="col text-green">
                        {% if test.state == 'notified' %}
                        Listo
                        {% else %}
                        Procesando
                        {% endif %}
                    </td>
                    <td class="col-3 text-center">

                        <!-- Test log see button-->
                        <button class="btn btn-sm btn-secondary detail-test-button" data-bs-toggle="modal"
                            data-bs-target="#resultDetailsDialog" index="{{forloop.counter0}}">

                            <img src="{% static 'img/see-ligth.svg' %}" width="20" height="20"
                                class="img-fluid mb-1 me-1">
                            <span class="d-none d-sm-inline">
                                VER
                            </span>
                        </button>

                        <!-- Selected Logs supress -->
                        <a href="/result/supress/{{test.id}}" class="btn btn-sm btn-danger p-1 px-3">
                            <img src="{% static 'img/delete-log.svg' %}" width="20" height="20"
                                class="img-fluid mb-1 me-1">
                            BORRAR
                        </a>

                    </td>
                </tr>
                {% endfor %}

            </tbody>
        </table>

    </div>


    {% include 'modals/modal_detail_result.html' %}

</div>